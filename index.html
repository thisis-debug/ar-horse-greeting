<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR Horse NFT Marker</title>

  <script src="https://cdn.jsdelivr.net/npm/aframe@1.5.0/dist/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.2/aframe/build/aframe-ar-nft.js"></script>

  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>

<body>

  <a-scene
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true;"
    embedded
    arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  >

    <!-- NFT マーカー -->
    <a-nft
      type="nft"
      url="marker"
      smooth="true"
      smoothCount="10"
      smoothTolerance="0.01"
      smoothThreshold="5"
    >

      <!-- 馬（箱で作る） -->
      <a-entity id="horse-root">

        <!-- 体 -->
        <a-box position="0 0.25 0"
               depth="0.6" height="0.3" width="0.2"
               color="#8B4513"></a-box>

        <!-- 頭 -->
        <a-box position="0 0.35 0.35"
               depth="0.2" height="0.2" width="0.18"
               color="#8B4513"></a-box>

        <!-- 首 -->
        <a-box position="0 0.32 0.2"
               depth="0.2" height="0.25" width="0.12"
               color="#A0522D"></a-box>

        <!-- 足 -->
        <a-box position="-0.07 0.05 -0.18"
               depth="0.1" height="0.1" width="0.06"
               color="#654321"></a-box>
        <a-box position=" 0.07 0.05 -0.18"
               depth="0.1" height="0.1" width="0.06"
               color="#654321"></a-box>
        <a-box position="-0.07 0.05  0.18"
               depth="0.1" height="0.1" width="0.06"
               color="#654321"></a-box>
        <a-box position=" 0.07 0.05  0.18"
               depth="0.1" height="0.1" width="0.06"
               color="#654321"></a-box>

        <!-- しっぽ -->
        <a-box position="0 0.3 -0.35"
               depth="0.15" height="0.05" width="0.05"
               color="#3B2F2F"></a-box>

      </a-entity>

    </a-nft>

    <a-entity camera></a-entity>

  </a-scene>

  <script>
    const horse = document.getElementById("horse-root");

    let angle = 0;

    function animateHorse() {
      angle += 0.03;

      const r = 0.6;
      const x = Math.cos(angle) * r;
      const z = Math.sin(angle) * r;

      horse.setAttribute("position", `${x} 0 ${z}`);

      const yaw = -angle * 180 / Math.PI + 90;
      horse.setAttribute("rotation", `0 ${yaw} 0`);

      requestAnimationFrame(animateHorse);
    }

    animateHorse();
  </script>

</body>
</html>
